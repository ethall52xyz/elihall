---
layout: default
---

<article class="post">
  <header class="post-header">
    <h1>{{ page.title }}</h1>

    <p class="post-meta">
      {% if page.date %}
        <span>{{ page.date | date: "%B %-d, %Y" }}</span>
      {% endif %}

      {% if page.tags %}
        <span class="post-tags">
          {% for tag in page.tags %}
            <span class="tag">{{ tag }}</span>
          {% endfor %}
        </span>
      {% endif %}
    </p>

    {% if page.summary %}
      <p class="post-summary">{{ page.summary }}</p>
    {% endif %}
  </header>

  <section class="post-content">
    {{ content }}
  </section>

  {%- comment -%}
  Automatic backlinks:
  Find essays/notes whose content contains this page's URL.
  {%- endcomment -%}

  {% assign backlinks = "" | split: "" %}
  {% assign all_entries = site.essays | concat: site.notes %}

  {% for entry in all_entries %}
    {% if entry.url != page.url and entry.content contains page.url %}
      {% assign backlinks = backlinks | push: entry %}
    {% endif %}
  {% endfor %}

  {% if backlinks.size > 0 %}
    <section class="backlinks">
      <h2>Backlinks</h2>
      <p class="backlinks-intro">
        These pages link here:
      </p>
      <ul>
        {% for ref in backlinks %}
          <li>
            <a href="{{ ref.url | relative_url }}">{{ ref.title }}</a>
            {% if ref.date %}
              <span class="meta">â€“ {{ ref.date | date: "%b %-d, %Y" }}</span>
            {% endif %}
            {% if ref.collection == "essays" %}
              <span class="badge">Essay</span>
            {% elsif ref.collection == "notes" %}
              <span class="badge">Note</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}
</article>
